@model IEnumerable<Pocket.Models.Category>

@{
    ViewBag.Title = "List";
}

<link href="~/Content/ui.jqgrid.css" rel="stylesheet" />
<script src="~/Scripts/grid.locale-en.js"></script>
<script src="~/Scripts/jquery.jqGrid.src.js"></script>
<script src="~/Scripts/QIE/JqGrid.js"></script>

<br />


<table id="lstCategory"></table>
<div id="pgrCategory"></div>
<div>
    @Html.AntiForgeryToken()
</div>
<script type="text/javascript">
    var colNames = ['CategoryID', 'Name'];
    var colModel = [
        { name: 'CategoryID', index: 'CategoryID', width: 55, key: true, hidden: true },
        { name: 'Name', index: 'Name', width: 100, editable: true, editrules: { required: true } }
    ];
    var sgColNames = ['SubcategoryID','CategoryID', 'Name', 'Budget Amount', 'Recursive'];
    var sgColModel = [
        { name: 'SubcategoryID', index: 'SubcategoryID', width: 55, key: true, hidden: true },
        { name: 'CategoryID', index: 'CategoryID', width: 55, hidden: true },
        { name: 'Name', index: 'Name', width: 100, editable: true, editrules: { required: true } },
        { name: 'BudgetAmount', index: 'BudgetAmount', width: 100, editable: true, editrules: { required: true, number: true } },
        { name: 'Recursive', index: 'Recursive', width: 100, editable: false,edittype: 'select', editrules: { required: false, select: true }, editoptions: { dataUrl: '/api/common/RecursionOptions' } }
    ];

    CreateJQGridSubGrid('/category/jlist', colNames, colModel, 'CategoryID', "/category/jedit", "Category List", "#lstCategory", '#pgrCategory', 
        '/subcat/jlist?CategoryID=', sgColNames, sgColModel, "SubcategoryID", "/subcat/jedit?CategoryID=", "Sub Categories", {sidx:'Name', sord:'asc', sg_sidx:'Name', sg_sord:'asc'});
    </script>
